<% if allowed_to?(:manage?, with: AssignmentPolicy) %>
  <li class='section'><%= t('menu.quick_links') %></li>
  <li>
    <%= link_to t('helpers.submit.create', model: Assignment.model_name.human),
                controller: 'assignments',
                action: 'new' %>
  </li>
  <% if Settings.scanned_exams.enable %>
    <li>
      <%= link_to t('helpers.submit.create', model: t('activerecord.models.scanned_assignment.one')),
                  controller: 'assignments',
                  action: 'new',
                  scanned: true %>
    </li>
  <% end %>
  <li>
    <%= link_to t('helpers.submit.create', model: t('activerecord.models.timed_assignment.one')),
                controller: 'assignments',
                action: 'new',
                timed: true %>
  </li>
  <li>
    <%= link_to t('helpers.submit.create', model: GradeEntryForm.model_name.human),
                controller: 'grade_entry_forms',
                action: 'new' %>
  </li>
<% end %>

<li class='section'><%= Assignment.model_name.human.pluralize %></li>

<% if @current_user.student? %>
  <% assignments = Assignment.joins(:section_due_dates).where(is_hidden: false,
                                                          'section_due_dates.section_id': @current_user.section,
                                                          'section_due_dates.is_hidden': [nil, false]) %>
  <% grade_entry_forms = GradeEntryForm.joins(:section_due_dates).where(is_hidden: false,
                                                                        'section_due_dates.section_id': @current_user.section,
                                                                        'section_due_dates.is_hidden': [nil, false]) %>
<% else %>
  <% assignments = Assignment.all %>
  <% grade_entry_forms = GradeEntryForm.all %>
<% end %>

<%= render partial: 'shared/assignment_dropdown_link',
           collection: assignments,
           as: :assignment,
           locals: { active_id: @assignment&.id } %>

<li class='section'><%= GradeEntryForm.model_name.human.pluralize %></li>

<%= render partial: 'shared/grade_entry_form_dropdown_link',
           collection: grade_entry_forms,
           as: :grade_entry_form,
           locals: { active_id: @grade_entry_form&.id } %>
