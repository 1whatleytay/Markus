<div class='section'>
  <% if @assignments.empty? %>
    <p><%= t(:no_assignments) %></p>
  <% else %>
    <div class='table'>
      <table>
        <thead>
        <tr>
          <th><%= t(:assignment_item) %></th>
          <th><%= t(:due) %></th>
        </tr>
        </thead>
        <tbody>
        <% @assignments.each do |assignment| -%>
          <tr>
            <td>
              <% if assignment.is_hidden %>
                <%= link_to truncate('assignment.hidden',
                                     assignment_text:
                                       "#{h(assignment.short_identifier)}: #{h(assignment.description)}" ),
                            view_summary_main_path(assignment),
                            remote: true %>
              <% else %>
                <%= link_to assignment.short_identifier + ': ' + assignment.description,
                            view_summary_main_path(assignment),
                            remote: true %>
              <% end %>
            </td>

            <td>
              <%= l(assignment.due_date, format: :long_date ) %>
            </td>


          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  <% end %>
</div>

<script>
  (function periodic() {
    jQuery.ajax({
      url:  '<%= update_collected_submissions_assignments_path %>',
      data: 'authenticity_token=' + AUTH_TOKEN ,
      type: 'POST',
      dataType: "script",
      complete: function() {
        // Schedule the next request when the current one's complete
        var timer = setTimeout(periodic, 4000);
      }
    });
  })();
</script>
