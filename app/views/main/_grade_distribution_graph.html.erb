<canvas id="assignment_<%= assignment.id %>" width="400" height="350"></canvas>

<script type="text/javascript">
    // Set-up the graph
    var g = new Bluff.SideBar('assignment_<%= assignment.id %>', '400x350');
    g.title = 'Grade Distribution';
    g.tooltips = true;
    g.theme_pastel();

    // Build the data
    g.data('Groupings',
        <% assignment.assignment_stat.grade_distribution_array.each do |d| -%>
            <%= d -%>,
        <% end -%>
        '');

    // Create the labels
    var intervals = 20;
    var steps = 100 / intervals; // number of percentage steps in each interval
    g.labels = {}
    for(i=0; i<intervals; i++){
        if(i == 0) lower = 0;
        else lower = 1 + i*steps;
        upper = (i+1) * steps;
        g.labels[i] = lower + '%-' + upper + '%';
    }

    // Draw the graph
    g.draw();
</script>
